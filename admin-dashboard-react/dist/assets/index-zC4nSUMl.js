import{b as z,D as F,c as p,k as I,m as M,n as Z,o as n,j as s,S as _,s as x,T as d,t as l,v as G,U as f,I as w}from"./index-7YwJOiqF.js";import{D as B,G as j,T as b,d as v,a as L}from"./DataGrid-BmiEYi6k.js";import"./Skeleton-7Wxbm9RT.js";const J=()=>{const g=z(e=>{var t,a;return(a=(t=e==null?void 0:e.userReducer)==null?void 0:t.user)==null?void 0:a._id}),{users:m,userRegister:y,updateUser:U,isUpdatingUser:N,deleteUser:S}=F(g),[A,q]=p.useState([]),{showModal:o,closeModal:c}=I(),{showSnackbar:i}=M(),h=Z().shape({firstName:n().required("First name is required").min(3,"Name must have a minimum of 3 characters").matches(/^[a-zA-Z]+(?: [a-zA-Z]+)*\s*$/,"Numbers are not allowed"),lastName:n().required("First name is required").min(3,"Name must have a minimum of 3 characters").matches(/^[a-zA-Z]+(?: [a-zA-Z]+)*\s*$/,"Numbers are not allowed"),email:n().email("invalid email !").required("email is required"),password:n().required("password is required").min(8,"pasword must be 8 or more characters").matches(/(?=.*[a-z])(?=.*[A-Z])\w+/,"password should contain at least one uppercase and lowercase character").matches(/\d/,"password should contain at least one number").matches(/[`!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?~]/,"password should contain at least one special character")}),E=async e=>{var a;let t;try{t=await y(e),i(t.message,"success"),c()}catch(r){const u=(a=r==null?void 0:r.response)==null?void 0:a.data;u&&i(u,"error")}},T=async e=>{var t;try{U(e),i("User updated successfully","success"),c()}catch(a){const r=(t=a==null?void 0:a.response)==null?void 0:t.data;r&&i(r,"error")}},$=()=>{o({title:"Add User",confirmText:"Save",onSubmit:E,content:s.jsx(f,{isEditEmail:"true"}),validation:h})},k=e=>{o({title:"Edit User",confirmText:"Save",onSubmit:T,content:s.jsx(f,{isEditing:!0}),defaultValue:e,isLoading:N,validation:h})},D=e=>{o({title:"Delete User",confirmText:"Delete",onSubmit:C,defaultValue:e,content:s.jsx(d,{children:"Are you sure you want to delete this user?"})})},C=async e=>{var t;try{const a=await S(e==null?void 0:e._id);i(a||a.message,"success"),c()}catch(a){const r=(t=a==null?void 0:a.response)==null?void 0:t.data;r&&i(r,"error")}},R=[{field:"firstName",headerName:"First name",width:200,editable:!1},{field:"lastName",headerName:"Last name",width:200,editable:!1},{field:"fullName",headerName:"Full name",sortable:!1,width:200,valueGetter:(e,t)=>`${t.firstName||""} ${t.lastName||""}`},{field:"email",headerName:"Email",sortable:!1,width:200},{field:"actions",type:"actions",width:200,getActions:e=>[s.jsx(j,{icon:s.jsx(l,{children:s.jsx(b,{title:"edit",children:s.jsx(w,{children:s.jsx(v,{color:"primary"})})})}),label:"view",sx:{color:"lightgray"},onClick:()=>{k(e==null?void 0:e.row)}}),s.jsx(j,{icon:s.jsx(l,{children:s.jsx(b,{title:"delete",children:s.jsx(w,{children:s.jsx(L,{color:"error"})})})}),label:"view",sx:{color:"lightgray"},onClick:()=>{D(e==null?void 0:e.row)}})],renderHeader:()=>s.jsx(d,{children:"Action"})}];return p.useMemo(()=>{q(m)},[m]),s.jsx(_,{title:s.jsxs(x,{justifyContent:"space-between",direction:"row",alignItems:"center",children:[s.jsx(d,{variant:"h3",children:"Users"}),s.jsx(l,{children:s.jsx(G,{variant:"contained",color:"secondary",sx:{float:"right"},onClick:$,children:"Add User +"})})]}),children:s.jsx(x,{spacing:2,children:s.jsx(B,{columns:R,rows:A})})})};export{J as default};
